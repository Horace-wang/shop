<!DOCTYPE html>
<html lang="zh-cmn-Hans" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="images/favicon.ico" th:href="@{/images/favicon.ico}">
	<link rel="stylesheet" href="css/iconfont.css" th:href="@{/css/iconfont.css}">
	<link rel="stylesheet" href="css/global.css" th:href="@{/css/global.css}">
	<link rel="stylesheet" href="css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
	<link rel="stylesheet" href="css/bootstrap-theme.min.css" th:href="@{/css/bootstrap-theme.min.css}">
	<link rel="stylesheet" href="css/swiper.min.css" th:href="@{/css/swiper.min.css}">
	<link rel="stylesheet" href="css/styles.css" th:href="@{/css/styles.css}">
	<script src="js/jquery.1.12.4.min.js" th:src="@{/js/jquery.1.12.4.min.js}" charset="UTF-8"></script>
	<script src="js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}" charset="UTF-8"></script>
	<script src="js/swiper.min.js" th:src="@{/js/swiper.min.js}" charset="UTF-8"></script>
	<script src="js/global.js" th:src="@{/js/global.js}" charset="UTF-8"></script>
	<script src="js/jquery.DJMask.2.1.1.js" th:src="@{/js/jquery.DJMask.2.1.1.js}" charset="UTF-8"></script>
	<title>服装销售系统</title>
</head>
<body>
<!-- 顶部tab -->
<div th:replace="commons/toptab::toptab"></div>
	<!-- 内页导航栏 -->
<div class="top-nav bg3">
	<div class="nav-box inner">
		<ul class="nva-list">
			<a href="index.html" th:href="@{/index}"><li class="active">首页</li></a>
			<a href="#" th:href="@{/clothesList(category=1)}"><li>男装</li></a>
			<a href="#" th:href="@{/clothesList(category=2)}"><li>女装</li></a>
			<a href="#" th:href="@{/user/login}" th:if="${session.user == null}"><li>用户登录</li></a>
			<a href="#" th:href="@{/superLogin}" th:if="${session.user == null}"><li>管理员登陆</li></a>
			<a href="#" th:href="@{/cartList}" th:if="${session.user != null}"><li>我的购物车</li></a>
			<a href="#" th:if="${session.user != null}" th:href="@{/orderList}"><li>我的订单</li></a>
		</ul>
	</div>
</div>
	<div class="content inner">
		<section class="item-show__div item-show__head clearfix">
			<div class="pull-left">
				<ol class="breadcrumb">
					<li><a href="javascript:void(0)" th:href="@{/index}">首页</a></li>
				</ol>
				<div class="item-pic__box" id="magnifier">
					<div class="small-box">
						<img class="cover" th:src="@{/static/}+${clothes.imgUrl}" alt="重回汉唐 旧忆 原创设计日常汉服女款绣花长褙子吊带改良宋裤春夏">
					</div>
					<div class="thumbnail-box">
						<a href="javascript:;" class="btn btn-default btn-prev"></a>
						<div class="thumb-list">
							<ul class="wrapper clearfix">
								<li class="item active"><img class="cover" th:src="@{'/static/'+${clothes.imgUrl}}" alt="商品预览图"></li>
							</ul>
						</div>
						<a href="javascript:;" class="btn btn-default btn-next"></a>
					</div>
				</div>
				<div class="item-info__box">
					<div class="item-title">
						<div class="name ep2" th:text="${clothes.name}">原创设计日常汉服女款绣花长褙子吊带改良宋裤春夏</div>
					</div>
					<div class="item-price bgf5">
						<div class="price-box clearfix">
							<div class="price-panel pull-left">
								售价：<span class="price" th:text="${clothes.newPrice}">￥19.20</span>
							</div>
						</div>
					</div>
					<div>
						<div class="item-sku">
							<dl class="item-prop clearfix">
								<dt class="item-metatit">颜色：</dt>
								<dd><ul data-property="颜色" class="clearfix">
									<li><a class="on" href="javascript:;" role="button" aria-disabled="true">
										<span th:text="${clothes.color}">白色</span>
									</a></li>
								</ul></dd>
							</dl>
							<dl class="item-prop clearfix">
								<dt class="item-metatit">尺码：</dt>
								<dd><ul data-property="尺码" class="clearfix">
									<li><a href="javascript:;" role="button" aria-disabled="true">
										<span th:text="${clothes.size}">S</span>
									</a></li>
								</ul></dd>
							</dl>
						</div>
						<div class="item-amount bgf5">
							<div class="item-metatit">数量：</div>
							<div class="amount-box">
								<input class="amount-input" maxlength="8"  type="number">
								<div class="item-stock"><span style="margin-left: 10px;">库存 <b id="Stock" th:text="${clothes.number}">1000</b> 件</span></div>
							</div>
						</div>
						<div class="item-action clearfix bgf5">
							<a href="javascript:void(0)" th:onclick="addCart([[${clothes.id}]])" rel="nofollow" data-addfastbuy="true" role="button" class="item-action__basket">
								<i class="iconfont icon-shopcart"></i> 加入购物车
							</a>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="item-show__div item-show__body posr clearfix">
			<div class="tab-content">
				<div role="tabpanel" class="tab-pane fade in active" id="detail" aria-labelledby="detail-tab">
					<div class="item-detail__info clearfix">
						<div class="record" th:text="${'商品编号:'+clothes.id}">商品编号：D-8812</div>
						<div class="record" th:text="${'上架时间:'+#dates.format(clothes.addTime,'yyyy-MM-dd')}">上架时间：2017-06-24</div>
						<div class="record" th:text="${'商品库存:'+clothes.number}">商品库存：1000件</div>
					</div>
				</div>
			</div>
		</section>
			</div>
		</section>
	</div>
	<!-- 右侧菜单 -->
	<!-- 底部信息 -->
<script th:inline="javascript">
	var user = [[${session.user}]];
	var contextPath = [[${#request.getContextPath()}]];
</script>
<script>
	//加入购物车
	function addCart(clothesId) {
		//验证购买衣服数量
		var clothNum = $('.amount-input').val();
		if(clothNum == '' || clothNum == 'undefined'){
			alert("请输入购买数量！");
			return;
		}
		//验证用户是否已经登陆
		if (user == ''||user == null){
			alert("请先登录");
			return;
		}
		//加入购物车
		$.ajax({
			url: contextPath + "/addCart",
			data:{'count' : clothNum,'clothesId' : clothesId},
			method:"post",
			success:function (data) {
				if(data == 'success'){
					//跳转到购物车列表
					window.location.href = contextPath + "/cartList";
				}

			}
		})
	}
</script>
</body>
</html>